{"ast":null,"code":"// 반환 타입(메인코드에서 이미 대응하고 있는 형태 그대로)\n\n// 옵션 타입\n\n/**\n * 트렌딩 키워드 가져오기\n * - 가능한 엔드포인트를 순차 시도하고, 실패하면 안전한 목업을 반환합니다.\n * - 메인 컴포넌트는 배열/객체 모두 처리하므로 그대로 맞춰줍니다.\n */\nexport async function getPopularTerms({\n  signal\n} = {}) {\n  // ❶ 실제 API가 있다면 여기 순서대로 시도\n  const BACKEND_URL = process.env.REACT_APP_BACKEND_URL || 'http://localhost:8083';\n  const baseUrl = process.env.NODE_ENV === 'production' ? BACKEND_URL : '';\n  const candidates = [`${baseUrl}/flask/crawl_popular_terms`,\n  // Flask API가 정상 작동 중\n  `${baseUrl}/api/v1/trending` // 백엔드 500 에러 (백업용)\n  ];\n  for (const url of candidates) {\n    try {\n      const res = await fetch(url, {\n        signal\n      });\n      if (res.ok) {\n        const data = await res.json();\n        return data;\n      }\n    } catch (e) {\n      if ((e === null || e === void 0 ? void 0 : e.name) === \"AbortError\") throw e;\n      // 다음 후보로 진행\n    }\n  }\n\n  // ❷ 전부 실패 시 안전 목업 반환\n  return {\n    daily: [{\n      title: \"서산 날씨\",\n      isNew: true\n    }, \"해미읍성\", \"서산 버스\", \"서산시 행사\", \"노인복지\", \"서산 카페\", \"미세 먼지\"],\n    weekly: [\"서산 맛집\", \"문화 혜택\", \"아이 돌봄\", \"서산 뉴스\", \"대산읍 공지\", \"주간 일정\", {\n      title: \"서산 축제\",\n      isNew: true\n    }]\n  };\n}\nexport {};","map":{"version":3,"names":["getPopularTerms","signal","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","baseUrl","NODE_ENV","candidates","url","res","fetch","ok","data","json","e","name","daily","title","isNew","weekly"],"sources":["C:/Users/이여재/Desktop/SpringProject/Seosan-Issue-front/src/services/trending.ts"],"sourcesContent":["// 반환 타입(메인코드에서 이미 대응하고 있는 형태 그대로)\nexport type TopicObj = { title: string; isNew?: boolean };\nexport type PopularTermsResult =\n  | string[]\n  | TopicObj[]\n  | { daily: (string | TopicObj)[]; weekly: (string | TopicObj)[] };\n\n// 옵션 타입\ninterface GetPopularTermsOptions {\n  signal?: AbortSignal;\n}\n\n/**\n * 트렌딩 키워드 가져오기\n * - 가능한 엔드포인트를 순차 시도하고, 실패하면 안전한 목업을 반환합니다.\n * - 메인 컴포넌트는 배열/객체 모두 처리하므로 그대로 맞춰줍니다.\n */\nexport async function getPopularTerms(\n  { signal }: GetPopularTermsOptions = {}\n): Promise<PopularTermsResult> {\n  // ❶ 실제 API가 있다면 여기 순서대로 시도\n  const BACKEND_URL = process.env.REACT_APP_BACKEND_URL || 'http://localhost:8083';\n  const baseUrl = process.env.NODE_ENV === 'production'\n    ? BACKEND_URL\n    : '';\n\n  const candidates = [\n    `${baseUrl}/flask/crawl_popular_terms`,  // Flask API가 정상 작동 중\n    `${baseUrl}/api/v1/trending`,            // 백엔드 500 에러 (백업용)\n  ];\n\n  for (const url of candidates) {\n    try {\n      const res = await fetch(url, { signal });\n      if (res.ok) {\n        const data = await res.json();\n        return data as PopularTermsResult;\n      }\n    } catch (e: any) {\n      if (e?.name === \"AbortError\") throw e;\n      // 다음 후보로 진행\n    }\n  }\n\n  // ❷ 전부 실패 시 안전 목업 반환\n  return {\n    daily: [\n      { title: \"서산 날씨\", isNew: true },\n      \"해미읍성\",\n      \"서산 버스\",\n      \"서산시 행사\",\n      \"노인복지\",\n      \"서산 카페\",\n      \"미세 먼지\",\n    ],\n    weekly: [\n      \"서산 맛집\",\n      \"문화 혜택\",\n      \"아이 돌봄\",\n      \"서산 뉴스\",\n      \"대산읍 공지\",\n      \"주간 일정\",\n      { title: \"서산 축제\", isNew: true },\n    ],\n  };\n}\nexport {};"],"mappings":"AAAA;;AAOA;;AAKA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeA,eAAeA,CACnC;EAAEC;AAA+B,CAAC,GAAG,CAAC,CAAC,EACV;EAC7B;EACA,MAAMC,WAAW,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,IAAI,uBAAuB;EAChF,MAAMC,OAAO,GAAGH,OAAO,CAACC,GAAG,CAACG,QAAQ,KAAK,YAAY,GACjDL,WAAW,GACX,EAAE;EAEN,MAAMM,UAAU,GAAG,CACjB,GAAGF,OAAO,4BAA4B;EAAG;EACzC,GAAGA,OAAO,kBAAkB,CAAa;EAAA,CAC1C;EAED,KAAK,MAAMG,GAAG,IAAID,UAAU,EAAE;IAC5B,IAAI;MACF,MAAME,GAAG,GAAG,MAAMC,KAAK,CAACF,GAAG,EAAE;QAAER;MAAO,CAAC,CAAC;MACxC,IAAIS,GAAG,CAACE,EAAE,EAAE;QACV,MAAMC,IAAI,GAAG,MAAMH,GAAG,CAACI,IAAI,CAAC,CAAC;QAC7B,OAAOD,IAAI;MACb;IACF,CAAC,CAAC,OAAOE,CAAM,EAAE;MACf,IAAI,CAAAA,CAAC,aAADA,CAAC,uBAADA,CAAC,CAAEC,IAAI,MAAK,YAAY,EAAE,MAAMD,CAAC;MACrC;IACF;EACF;;EAEA;EACA,OAAO;IACLE,KAAK,EAAE,CACL;MAAEC,KAAK,EAAE,OAAO;MAAEC,KAAK,EAAE;IAAK,CAAC,EAC/B,MAAM,EACN,OAAO,EACP,QAAQ,EACR,MAAM,EACN,OAAO,EACP,OAAO,CACR;IACDC,MAAM,EAAE,CACN,OAAO,EACP,OAAO,EACP,OAAO,EACP,OAAO,EACP,QAAQ,EACR,OAAO,EACP;MAAEF,KAAK,EAAE,OAAO;MAAEC,KAAK,EAAE;IAAK,CAAC;EAEnC,CAAC;AACH;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}